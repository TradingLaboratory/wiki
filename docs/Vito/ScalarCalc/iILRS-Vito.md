# iILRS ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞–ª –Ω–∞–∫–ª–æ–Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (Integral of Linear Regression Slope)
**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** `ScalarCalc` ‚Ä¢ **–¢–∏–ø:** –°–∫–∞–ª—è—Ä–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–µ –æ–∫–Ω–∞  
*–ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é). –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –±–∞—Ä–µ –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏.*

```csharp
public static double iILRS(
    IList<double> price,
    int period,
    int barNum)
```

üìà –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã—á–∏—Å–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–Ω–∏–∏ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ –∫—Ä–∞–π–Ω–µ–π –ø—Ä–∞–≤–æ–π —Ç–æ—á–∫–µ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞. –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å—É–º–º—É –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞–∫–ª–æ–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –∏ –ø—Ä–æ—Å—Ç–æ–π —Å–∫–æ–ª—å–∑—è—â–µ–π —Å—Ä–µ–¥–Ω–µ–π (SMA). –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–π —à—É–º, —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤—ã–µ —Ç—Ä–µ–Ω–¥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è. –ó–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—ã: –≤—ã—à–µ —Ü–µ–Ω—ã ‚Äî –≤–æ—Å—Ö–æ–¥—è—â–∏–π –∏–º–ø—É–ª—å—Å, –Ω–∏–∂–µ ‚Äî –Ω–∏—Å—Ö–æ–¥—è—â–∏–π.

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞
```
iLRS = normalizedSlope + SMA

normalizedSlope = [N¬∑Œ£(i¬∑price·µ¢) - Œ£(i)¬∑Œ£(price·µ¢)] / [Œ£(i)¬≤ - N¬∑Œ£(i¬≤)]
SMA = Œ£(price·µ¢) / N
```
*–ì–¥–µ:*  
`N` ‚Äî –ø–µ—Ä–∏–æ–¥ –æ–∫–Ω–∞, `i` ‚Äî –∏–Ω–¥–µ–∫—Å –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞ (0 ‚Äî —Ç–µ–∫—É—â–∏–π –±–∞—Ä), `price·µ¢` ‚Äî —Ü–µ–Ω–∞ –Ω–∞ –±–∞—Ä–µ.  
*–ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ `barNum ‚â• period - 1`.*

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|------------------------|----------|
| `price` | `IList<double>` | ‚Äî | –ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–Ω (–æ–±—ã—á–Ω–æ `Close`). –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é ‚â• `barNum + 1` —ç–ª–µ–º–µ–Ω—Ç–æ–≤. |
| `period` | `int` | ‚Äî | –î–ª–∏–Ω–∞ –æ–∫–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏. –ú–∏–Ω–∏–º—É–º: 2 –±–∞—Ä–∞. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ —Å–Ω–∏–∂–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —É—Å–∏–ª–∏–≤–∞–µ—Ç —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ. |
| `barNum` | `int` | ‚Äî | –ò–Ω–¥–µ–∫—Å —Ü–µ–ª–µ–≤–æ–≥–æ –±–∞—Ä–∞ (0 ‚Äî —Ç–µ–∫—É—â–∏–π). –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: `barNum ‚â• period - 1`. |

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `double` ‚Äî —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –±–∞—Ä–µ. –ó–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ ‚âà `period / 3` –±–∞—Ä–æ–≤. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
- `iILRS > —Ü–µ–Ω–∞` ‚Äî —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ª–∏–Ω–∏—è –≤—ã—à–µ —Ü–µ–Ω—ã, –ø—Ä–∏–∑–Ω–∞–∫ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è
- `iILRS < —Ü–µ–Ω–∞` ‚Äî –ª–∏–Ω–∏—è –Ω–∏–∂–µ —Ü–µ–Ω—ã, –ø—Ä–∏–∑–Ω–∞–∫ –Ω–∏—Å—Ö–æ–¥—è—â–µ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è
- –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ/–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ TSLab
```csharp
using vvTSLtools;

// –†–∞—Å—á—ë—Ç –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞—Ä–∞ (barNum = 0)
double currentILRS = IndicatorsVV.iILRS(Close, 14, 0);

// –†–∞—Å—á—ë—Ç –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±–∞—Ä–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏–∫–∏)
double prevILRS = IndicatorsVV.iILRS(Close, 14, 1);

// –ê–Ω–∞–ª–∏–∑ —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏
double slopeChange = currentILRS - prevILRS;
if (slopeChange > 0.5 * ATR[0])
{
    // –†–µ–∑–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –∏–º–ø—É–ª—å—Å–∞
}
```
*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–µ—Ç–æ–¥ —Å–∫–∞–ª—è—Ä–Ω—ã–π ‚Äî –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ü–∏–∫–ª –ø–æ –∏—Å—Ç–æ—Ä–∏–∏. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–¥–∞.*

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
‚úÖ **–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∫–∞–ª—è—Ä–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –≤—Ö–æ–¥–∞
- –†–∞—Å—á—ë—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã –æ—Ç ¬´—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–π¬ª —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–Ω–¥–æ–≤–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π
- –û—Ü–µ–Ω–∫–∞ —Å–∏–ª—ã –∏–º–ø—É–ª—å—Å–∞ —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ –±–∞—Ä–∞–º–∏
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, iILRS ‚àí SMA)

üí° **–ò–¥–µ–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –ª–æ–≥–∏–∫—É**
- –ö–æ—Ä—Ä–µ–∫—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–π –ª–∏–Ω–∏–∏
- –í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø–æ —Ç–µ–∫—É—â–µ–º—É –Ω–∞–∫–ª–æ–Ω—É —Ç—Ä–µ–Ω–¥–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–æ–µ–≤: –ø—Ä–æ–±–æ–π —Ü–µ–Ω–æ–π –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–¥–≤–∏–≥–æ–º iILRS –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- –¢—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ (`barNum ‚â• period - 1`)
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–º –≤—Å–ø–ª–µ—Å–∫–∞–º —Ü–µ–Ω—ã –≤ –æ–∫–Ω–µ —Ä–∞—Å—á—ë—Ç–∞
- –ù–∞ –º–∞–ª—ã—Ö –ø–µ—Ä–∏–æ–¥–∞—Ö (< 8) –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—É—é ¬´–¥—Ä–æ–∂—å¬ª –∑–Ω–∞—á–µ–Ω–∏–π