# CalcLinearRegSlopeMS ‚Äî –õ–∏–Ω–µ–π–Ω—ã–π —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –Ω–∞–∫–ª–æ–Ω (LRS)
**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** `MomentumIndicators` ‚Ä¢ **–¢–∏–ø:** –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏  
*–ü–æ—Å—Ç—Ñ–∏–∫—Å ¬´MS¬ª —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ MetaStock –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã TSLab —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è.*

```csharp
public static IList<double> CalcLinearRegSlopeMS(IContext ctx, int nio, double xio, IList<double> src)
```

üí° –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–∑–º–µ—Ä—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–∞–∫–ª–æ–Ω –ª–∏–Ω–∏–∏ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ MetaStock –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ —á–µ—Ç—ã—Ä—ë—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –≤–ª–∏—è–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —à—É–º–∞ –∏ –ø–æ–≤—ã—à–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–æ–≤.

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞
```
slope = (N * Œ£(i * y·µ¢) - Œ£i * Œ£y·µ¢) / (N * Œ£(i¬≤) - (Œ£i)¬≤)
```
–≥–¥–µ:  
- `N` ‚Äî –¥–ª–∏–Ω–∞ –æ–∫–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (`nio`)  
- `i` ‚Äî –∏–Ω–¥–µ–∫—Å –±–∞—Ä–∞ –≤ –æ–∫–Ω–µ (0...N-1)  
- `y·µ¢` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≥–ª–∞–∂–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  
–ü–µ—Ä–≤—ã–µ `nio + 2` –∑–Ω–∞—á–µ–Ω–∏–π –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω—É–ª—è–º–∏ –∏–∑-–∑–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –æ–±—ä—ë–º—É –¥–∞–Ω–Ω—ã—Ö.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|------------------------|----------|
| `ctx` | `IContext` | ‚Äî | –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ TSLab. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ `context.GetData()` –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. |
| `nio` | `int` | ‚Äî | –ë–∞–∑–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥ (Number of Intervals Offset). –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —à–∏—Ä–∏–Ω—É –æ–∫–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –∏ –ø–µ—Ä–∏–æ–¥—ã —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ. |
| `xio` | `double` | ‚Äî | –ü–∞—Ä–∞–º–µ—Ç—Ä –∞—Å–∏–º–º–µ—Ç—Ä–∏–∏ –≤–µ—Å–æ–≤ (-1.0; 1.0). –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —É—Å–∏–ª–∏–≤–∞—é—Ç –≤–ª–∏—è–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (–±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫), –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ ‚Äî –¥–ª–∏–Ω–Ω—ã—Ö (–ø–ª–∞–≤–Ω—ã–π —Ç—Ä–µ–Ω–¥). |
| `src` | `IList<double>` | ‚Äî | –ò—Å—Ö–æ–¥–Ω—ã–π —Ä—è–¥ –¥–∞–Ω–Ω—ã—Ö: —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è (`Close`), –º–∞–∫—Å–∏–º—É–º—ã/–º–∏–Ω–∏–º—É–º—ã –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞. |

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `IList<double>` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–∫–ª–æ–Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –∑–∞ –±–∞—Ä. –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–æ—Å—Ö–æ–¥—è—â–∏–π –∏–º–ø—É–ª—å—Å, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ ‚Äî –Ω–∞ –Ω–∏—Å—Ö–æ–¥—è—â–∏–π. –ó–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `nio + 2` –±–∞—Ä–∞ –∏–∑-–∑–∞ –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ TSLab
```csharp
using vvTSLtools;  // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VitoIndicators.dll

// –†–∞—Å—á—ë—Ç —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
var slope = IndicatorsVV.CalcLinearRegSlopeMS(Context, nio: 14, xio: 0.3, src: Close);

// –†–∞—Å—á—ë—Ç –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ –ª—è–º–±–¥—É)
var slopeNoCache = IndicatorsVV.CalcLinearRegSlopeMS(null, 14, 0.3, Close);

// –¢–æ—Ä–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞: –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –Ω—É–ª–µ–≤–æ–π –ª–∏–Ω–∏–∏
if (slope[BarsCount - 1] > 0 && slope[BarsCount - 2] <= 0)
{
    // –°–∏–≥–Ω–∞–ª –Ω–∞ –ø–æ–∫—É–ø–∫—É –ø—Ä–∏ —Å–º–µ–Ω–µ –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ –≤–æ—Å—Ö–æ–¥—è—â–∏–π
}
```
*–°–±–æ—Ä–∫–∞ `VitoIndicators.dll` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ–Ω—é ¬´–°–±–æ—Ä–∫–∏¬ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ TSLab. –ü–∞—Ä–∞–º–µ—Ç—Ä `Context` –¥–æ—Å—Ç—É–ø–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –º–µ—Ç–æ–¥–∞—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `OnBar`).*

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
‚úÖ **–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**  
‚Äî –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–ª—ã –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ —Ç—Ä–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã  
‚Äî –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–æ–µ–≤ –∑–∞ —Å—á—ë—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è  
‚Äî –ü–æ–∏—Å–∫ –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏–π –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –∏ –∏–º–ø—É–ª—å—Å–æ–º  
‚Äî –ê–¥–∞–ø—Ç–∞—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `xio` –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã  
‚Äî –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `nio`

üí° **–ò–¥–µ–∏ –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π**  
‚Äî –í—Ö–æ–¥ –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –Ω—É–ª–µ–≤–æ–π –ª–∏–Ω–∏–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –æ–±—ä—ë–º–æ–º  
‚Äî –£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏, –ø–æ–∫–∞ –Ω–∞–∫–ª–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–Ω–∞–∫ (—Ç—Ä–µ–Ω–¥–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)  
‚Äî –°–∫–∞–ª—å–ø–∏–Ω–≥ –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö —Å `nio=5‚Äì8` –∏ `xio=0.5` (–∞–∫—Ü–µ–Ω—Ç –Ω–∞ –±—ã—Å—Ç—Ä—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è)  
‚Äî –°–≤–∏–Ω–≥-—Ç–æ—Ä–≥–æ–≤–ª—è —Å `nio=20` –∏ `xio=-0.3` (—É—Å—Ç–æ–π—á–∏–≤—ã–µ —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã)  
‚Äî –≠–∫—Å–ø–æ—Ä—Ç –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–≤ –∏–º–ø—É–ª—å—Å–∞

‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**  
‚Äî –ó–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ `nio`, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Ñ–ª—ç—Ç–∞—Ö  
‚Äî –ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ `xio` –±–ª–∏–∑–∫–æ–º –∫ ¬±1.0 –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã  
‚Äî –¢—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º `nio + 2` –±–∞—Ä–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É–ª—å—Ç—Ä–∞–∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ—Ä–∏–π –¥–∞–Ω–Ω—ã—Ö